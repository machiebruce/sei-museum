<!DOCTYPE html><html lang="en" class="scroll-smooth"> <head><meta charset="UTF-8"><meta name="description" content="Astro description"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="/favicon.svg"><meta name="generator" content="Astro v4.11.5"><title>Esempio Scheda Specie</title><link rel="stylesheet" href="/sei-museum/_astro/index.DBZWLDdH.css">
<link rel="stylesheet" href="/sei-museum/_astro/03.n1yAKYbq.css"><script type="module" src="/sei-museum/_astro/hoisted.Dpn1dADV.js"></script></head> <body class="bg-neutral-900 antialiased">  <main class="flex flex-row h-screen overflow-hidden"> <div class="bg-primary-500 p-8 w-fit z-50 h-screen flex flex-col justify-between items-center gap-y-16"> <!--top--> <a href="/sei-museum"><img class="w-24" src="/sei-museum/_astro/favicon.DIXWkdX1.svg" alt="Saline ettore infersa logo"></a> <!--middle--> <div class="gap-16 flex flex-col justify-end flex-1 w-24"> <!--title--> <p class="text-white text-center font-bold text-2xl uppercase whitespace-nowrap -rotate-90">Esempio Scheda Specie</p>  </div> <!--bottom--> <a href="/sei-museum" class="flex flex-col items-center hover:opacity-80 hover:-translate-y-2 animation-smooth"> <img class="w-12" src="/sei-museum/_astro/menu.l_n9I9et.svg" alt="Home"> <p class="text-white font-bold">HOME</p> </a> </div> <div class="grid grid-cols-2 gap-8 w-full p-32 overflow-hidden"> <!-- Colonna 1: Galleria immagini, Nome specie, Descrizione --> <div class="flex flex-col gap-y-8"> <!-- Galleria immagini -->  <!-- Nome specie --> <div class="text-white space-y-2"> <h1 class="text-5xl font-bold">Esempio Scheda Specie</h1>  </div> <!-- Descrizione (primo paragrafo) --> <div id="species-description" class="prose prose-invert max-w-none text-white text-base leading-relaxed"> <!-- Verrà popolato dal client script --> </div> </div> <!-- Colonna 2: Card delle sezioni con scroll verticale --> <div class="flex flex-col h-full"> <div class="text-white mb-6"> <h2 class="text-3xl font-bold">Esempio Scheda Specie</h2> </div> <div id="species-sections-container" class="flex flex-col gap-6 overflow-y-auto overflow-x-hidden flex-1 pr-4 no-scrollbar"> <!-- Contenuto temporaneo, verrà sostituito dal script --> <div id="species-full-content" style="display: none;"> <div class="prose prose-invert max-w-none"> <p>Contenuto della scheda specie in Markdown.</p>
<h2 id="sezione-1">Sezione 1</h2>
<p>Testo descrittivo…</p>
<h2 id="sezione-2">Sezione 2</h2>
<p>Altro contenuto…</p> </div> </div> </div> </div> </div> </main> <script>
        (function () {
            function extractSections() {
                // Lista delle sezioni da cercare
                const sectionTitles = ["Aspetto e Caratteristiche Fisiche", "Distribuzione e Habitat", "Alimentazione", "Comportamento e Riproduzione", "Status e Conservazione", "Curiosità e Riepilogo", "Differenze con", "Fonti e Risorse per Approfondire"];

                const fullContentDiv = document.getElementById("species-full-content");
                if (!fullContentDiv) return;

                const container = document.getElementById("species-sections-container");
                const descContainer = document.getElementById("species-description");

                // Estrai tutti gli heading e il loro contenuto
                const headings = fullContentDiv.querySelectorAll("h3, h4");
                const sections = [];

                headings.forEach((heading) => {
                    const headingText = heading.textContent.trim().replace(/\*\*/g, "").trim();
                    const matchingSection = sectionTitles.find((title) => headingText.includes(title));

                    if (matchingSection) {
                        let content = "";
                        let nextElement = heading.nextElementSibling;

                        // Raccogli tutto il contenuto fino al prossimo heading
                        while (nextElement && !nextElement.matches("h3, h4")) {
                            content += nextElement.outerHTML;
                            nextElement = nextElement.nextElementSibling;
                        }

                        if (content.trim()) {
                            sections.push({
                                title: headingText,
                                content: content.trim(),
                            });
                        }
                    }
                });

                // Estrai la descrizione (primo paragrafo prima degli heading)
                const firstP = fullContentDiv.querySelector("p");
                if (firstP && descContainer) {
                    // Aggiungi classi per assicurarsi che il testo sia bianco
                    const pClone = firstP.cloneNode(true);
                    if (pClone instanceof HTMLElement) {
                        pClone.classList.add("text-white");
                    }
                    descContainer.innerHTML = pClone.outerHTML;
                }

                // Renderizza le card delle sezioni come accordion
                if (sections.length > 0 && container) {
                    // Crea un documento temporaneo per gestire meglio l'HTML
                    const tempDiv = document.createElement("div");
                    sections.forEach((section, index) => {
                        const title = section.title.replace(/</g, "&lt;").replace(/>/g, "&gt;");
                        const accordionId = `accordion-${index}`;

                        const accordionDiv = document.createElement("div");
                        accordionDiv.className = "bg-neutral-700 rounded-2xl overflow-hidden";
                            accordionDiv.innerHTML = `
                            <button 
                                class="accordion-button w-full text-left p-6 text-white hover:bg-neutral-600 transition-colors flex items-center justify-between"
                                data-accordion-id="${accordionId}"
                                aria-expanded="false"
                            >
                                <h3 class="text-2xl font-bold text-white">${title}</h3>
                                <svg class="accordion-icon w-6 h-6 text-white transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                                </svg>
                            </button>
                            <div 
                                class="accordion-content hidden"
                                id="${accordionId}"
                            >
                                <div class="p-6 pt-0 prose prose-invert max-w-none text-white text-base [&_p]:text-white [&_li]:text-white [&_strong]:text-white [&_em]:text-white [&_a]:text-white break-words [&_a]:break-all">
                                    ${section.content}
                                </div>
                            </div>
                        `;
                        tempDiv.appendChild(accordionDiv);
                    });
                    container.innerHTML = tempDiv.innerHTML;

                    // Aggiungi event listeners per gli accordion
                    const buttons = container.querySelectorAll(".accordion-button");
                    buttons.forEach((button) => {
                        button.addEventListener("click", function () {
                            const accordionId = this.getAttribute("data-accordion-id");
                            const content = container.querySelector(`#${accordionId}`);
                            const icon = this.querySelector(".accordion-icon");
                            const isExpanded = this.getAttribute("aria-expanded") === "true";

                            // Chiudi tutti gli altri accordion
                            buttons.forEach((btn) => {
                                if (btn !== this) {
                                    const otherId = btn.getAttribute("data-accordion-id");
                                    const otherContent = container.querySelector(`#${otherId}`);
                                    const otherIcon = btn.querySelector(".accordion-icon");
                                    if (otherContent) {
                                        otherContent.classList.add("hidden");
                                        btn.setAttribute("aria-expanded", "false");
                                        if (otherIcon) {
                                            otherIcon.style.transform = "rotate(0deg)";
                                        }
                                    }
                                }
                            });

                            // Toggle accordion corrente
                            if (content) {
                                if (isExpanded) {
                                    content.classList.add("hidden");
                                    this.setAttribute("aria-expanded", "false");
                                    if (icon) {
                                        icon.style.transform = "rotate(0deg)";
                                    }
                                } else {
                                    content.classList.remove("hidden");
                                    this.setAttribute("aria-expanded", "true");
                                    if (icon) {
                                        icon.style.transform = "rotate(180deg)";
                                    }
                                }
                            }
                        });
                    });
                } else if (container) {
                    // Fallback: mostra tutto il contenuto in una card
                    const proseDiv = fullContentDiv.querySelector(".prose");
                    if (proseDiv) {
                        container.innerHTML = `
              <div class="bg-neutral-700 rounded-2xl p-6 text-white [&_*]:text-white overflow-hidden">
                <div class="prose prose-invert max-w-none text-white text-base [&_p]:text-white [&_li]:text-white [&_strong]:text-white [&_em]:text-white [&_a]:text-white break-words [&_a]:break-all">
                  ${proseDiv.innerHTML}
                </div>
              </div>
            `;
                    }
                }

                // Rimuovi il contenuto temporaneo
                fullContentDiv.remove();
            }

            // Esegui quando il DOM è pronto
            if (document.readyState === "loading") {
                document.addEventListener("DOMContentLoaded", extractSections);
            } else {
                extractSections();
            }
        })();
    </script>  <meta name="astro-view-transitions-enabled" content="true"><meta name="astro-view-transitions-fallback" content="animate"> </body></html>